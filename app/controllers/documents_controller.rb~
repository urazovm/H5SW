class DocumentsController < ApplicationController

  
  def new
    @documentable = find_documentable
    @document = Document.new
  end

  def create
    @documentable = find_documentable
    @document = @documentable.documents.build(params[:document])
   if @document.save
     flash[:notice] = "successfully uploaded document"
     redirect_to :id => nil
     else
     render :action => 'new'
   end
  end

 private
  def find_commentable
    params.each do |name, value|
      if name =~ /(.+)_id$/
       return $1.classify.constantize.find(value)
      end
    end
   nil
  end

end

